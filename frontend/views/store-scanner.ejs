<%- include('partials/head.ejs') %>
<%- include('partials/header.ejs') %>
<style>
#scan-n-go-content-container {
padding-top:0 !important;
}
</style>
<h5 class='text-center' style="font-family:'lato';background-color:#7d1e51;padding-top: 8px !important;padding-bottom: 8px;margin-bottom: 0;color: white;">Store Scan-In</h5>
<div id="scandit-barcode-picker" style="max-width: 1280px; max-height: 80%;"></div>


<script>
document.getElementById("basket-navbar-icon").style.display = "none";
document.getElementById("navbarDropdownMenuLink").style.display = "none";

ScanditSDK.configure("AQwRTCedBl9MFixspSOOt7UdpWJKRNo1XHpK565iHqMMVHMysVEPMC1LEzPEJlRwD3js48lXFaT5Unn5sHLXzSJ9z2PhV5qKGnUjgOImffHZNQKuDQb4Bahohqs2Vb4B3lILDMZvGtGiDMDB1VB2QExxpdB4buVCjEN2fE5jwl5YaZlJ2Xu4lJJ6Rv9XUpK0lVbuL8NKipNNfHfZIzQTB+xB3KnxAbA+py73K1lVf4JlbtXG2Ml6i3UOjrPn3rh5Rnko4x9KbWcOO7pM/fkfor1yvjyE6JjVHbNlclyry1FyqSO2zvWQFWrGkPM4BcH74moNaW3dQ4FvtOhJY/Onj/fB/dBoKZmfkT3x65JXRJLCQEzdMw/Cbj4NevSPEBoXx3oCDUPEvgzIhePR9+gu97ASF36UysoC2zF0xRLXT7/a0svHB/lXHtIxXLnCZZZZbbNwZnzJ+sYLrttuyzURkkOSgEZmZqTPaHfILpEYOjOCKVat9E5ZH5pyJifqo7on5u7qvmemY+mKbPmbwfTBPQx5KveOyebe1Q+LbtQXrRN8pGD/3JUKemjePFp5XqSepeEKMChT0Zq0hIxCeJWbBHRBSuA4eW/FAtivlxOwyuOmoKbXAEUSQir41977e96Gn9Dtggi+qtBi199TUsrM+OpQw14SkEpqMMUbg9nJDF03ctW6DUR4XTRNtGKxxuDxeG3B4puTqCVf2ukPV+hLbLs1fytQGnYUCh1ab5UBlR6K7YOaAznMYbVOtOWEMwukDqVl4Qp8yebNtAkFQE6Z1/QPM6qjYayfyCgQYWoUYOS1xExcMrWIIvjlRJA/ZthK5v3qxUAtoBWEOe+f6smxBGslEt8a7zViICLUtrLlq7UdGPyHuHbsh+e64omvdnt9ZcochLcO0e5dnEqj", {
  engineLocation: "https://cdn.jsdelivr.net/npm/scandit-sdk@5.x/build/",
})
  .then(() => {
    return ScanditSDK.BarcodePicker.create(document.getElementById("scandit-barcode-picker"), {
      // enable some common symbologies
      scanSettings: new ScanditSDK.ScanSettings({ enabledSymbologies: ["aztec","ean8", "ean13", "upca", "upce"],playSoundOnScan: true,
  vibrateOnScan: true, }),
    });
  })
  .then((barcodePicker) => {
    // barcodePicker is ready here, show a message every time a barcode is scanned
    barcodePicker.on("scan", (scanResult) => {
      if (scanResult.barcodes[0].data.slice(0,6) == "store-") {
        setUserStore(scanResult.barcodes[0].data.slice(6))
      } else {
        alert("Invalid Store Barcode! The barcode you scanned was " + scanResult.barcodes[0].data);
      }
      // location.href = '/';
    });
  });


// create personalised message on homescreen banner
function createWelcome() {
  var username = sessionStorage.getItem('username')
  document.getElementById("welcome-message").innerHTML = "Welcome, " + username + "!"
}

// check if user is logged in and create the welcome message on the banner
//window.onload = function() {
  //checkLogin();
  //createWelcome();
//};

</script>
<%- include('partials/footer.ejs') %>
